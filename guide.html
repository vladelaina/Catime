<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Catime æŒ‡å— - äº†è§£æœ€æ–°çš„æ—¶é—´ç®¡ç†æŠ€å·§ã€è½¯ä»¶æ›´æ–°å’Œç”¨æˆ·æ•…äº‹ã€‚">
    <title>æŒ‡å— - Catime | å¯çˆ±é£ Windows è®¡æ—¶å™¨ & ç•ªèŒ„é’Ÿ</title>

    <!-- Google å­—ä½“ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Noto+Sans+SC:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- AOS åº“ -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Marked.js ç”¨äºè§£æMarkdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- è‡ªå®šä¹‰æ ·å¼è¡¨ -->
    <link rel="stylesheet" href="style.css">

    <link rel="icon" type="image/png" href="assets/catime.png">
</head>
<body>

    <!-- æ»šåŠ¨è¿›åº¦æŒ‡ç¤ºå™¨ -->
    <div class="scroll-progress-container" id="scrollProgressContainer">
        <div class="scroll-progress-glow"></div>
        <div class="scroll-progress-particles">
            <span class="particle p1"></span>
            <span class="particle p2"></span>
            <span class="particle p3"></span>
            <span class="particle p4"></span>
            <span class="particle p5"></span>
            <span class="particle p6"></span>
        </div>
        <svg class="scroll-progress-circle" viewBox="0 0 100 100">
            <circle class="scroll-progress-circle-bg" cx="50" cy="50" r="45"></circle>
            <circle class="scroll-progress-circle-fill" cx="50" cy="50" r="45"></circle>
            <circle class="scroll-progress-circle-inner" cx="50" cy="50" r="35"></circle>
        </svg>
        <div class="scroll-progress-icon">
            <i class="fas fa-arrow-up"></i>
        </div>
        <div class="scroll-progress-emoji-container">
            <span class="emoji emoji-rocket">ğŸš€</span>
            <span class="emoji emoji-star">â­</span>
            <span class="emoji emoji-heart">ğŸ’–</span>
        </div>
        <div class="scroll-progress-stars">
            <span class="star star-1">âœ¦</span>
            <span class="star star-2">âœ§</span>
            <span class="star star-3">âœ¦</span>
            <span class="star star-4">âœ§</span>
            <span class="star star-5">âœ¦</span>
        </div>
        <div class="scroll-progress-percentage">0%</div>
    </div>

    <!-- é¡µå¤´/å¯¼èˆª -->
    <header class="main-header">
        <nav class="container">
            <a href="index.html" class="logo"><img src="assets/catime.png" class="logo-img" alt="Catime Logo"> Catime</a>
            <ul class="nav-links">
                <li><a href="index.html">é¦–é¡µ</a></li>
                <li><a href="guide.html" class="active">æŒ‡å—</a></li>
                <li><a href="https://mp.weixin.qq.com/s/cE6AcVwx4-HPSFM7RBpxmw" target="_blank" rel="noopener noreferrer">å…³äº</a></li>
                <li><a href="https://github.com/vladelaina/Catime" target="_blank" rel="noopener noreferrer">GitHub</a></li>
                <li><a href="https://github.com/vladelaina/Catime/releases/latest" class="nav-button" target="_blank" rel="noopener noreferrer"><i class="fas fa-download"></i> ä¸‹è½½</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <!-- Wiki å†…å®¹åŒºåŸŸ -->
        <section class="wiki-section">
            <div class="container">
                <div class="wiki-container" data-aos="fade-up">
                    <!-- å·¦ä¾§å¯¼èˆª -->
                    <div class="wiki-sidebar">
                        <h3>æ–‡æ¡£ç›®å½•</h3>
                        <ul class="wiki-list" id="wiki-navigation">
                            <li><a href="#" data-page="Home" class="active">é¦–é¡µ</a></li>
                            <li><a href="#" data-page="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯</a></li>
                            <li class="category">èœå•è¯´æ˜</li>
                            <li class="sub-item"><a href="#" data-page="å³é”®æ‰˜ç›˜å›¾æ ‡">å³é”®æ‰˜ç›˜å›¾æ ‡</a></li>
                            <li class="sub-item"><a href="#" data-page="å·¦é”®æ‰˜ç›˜å›¾æ ‡">å·¦é”®æ‰˜ç›˜å›¾æ ‡</a></li>
                            <li><a href="#" data-page="å¸¸è§é—®é¢˜">å¸¸è§é—®é¢˜</a></li>
                        </ul>
                    </div>
                    
                    <!-- å³ä¾§å†…å®¹ -->
                    <div class="wiki-content">
                        <div id="wiki-content-container">
                            <div id="content-loading" style="display: none;">
                                <i class="fas fa-circle-notch fa-spin fa-2x"></i>
                            </div>
                            <div id="debug-info" style="margin-bottom: 15px; padding: 10px; background: #f5f5f5; border-radius: 5px; font-size: 0.9em; display: none;">
                                <div><strong>å½“å‰é¡µé¢URL:</strong> <span id="current-url"></span></div>
                                <div><strong>å½“å‰å·¥ä½œç›®å½•:</strong> <span id="current-dir"></span></div>
                                <div style="margin-top: 10px;">
                                    <button id="test-fetch" class="btn btn-sm btn-primary">æµ‹è¯•åŠ è½½Home.md</button>
                                    <button id="toggle-debug" class="btn btn-sm btn-secondary" style="margin-left: 10px;">éšè—è°ƒè¯•ä¿¡æ¯</button>
                                </div>
                            </div>
                            <div id="markdown-content"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- é¡µè„š -->
    <footer class="main-footer">
        <div class="container">
            <p>&copy; 2024 Catime Project by <a href="https://github.com/vladelaina" target="_blank" rel="noopener noreferrer">vladelaina</a>.</p>
            <p>åŸºäº <a href="https://github.com/vladelaina/Catime/blob/main/LICENSE" target="_blank" rel="noopener noreferrer">Apache 2.0</a> è®¸å¯å¼€æº.</p>
            <p>å›¾æ ‡ç”»å¸ˆ: <a href="https://space.bilibili.com/26087398" target="_blank" rel="noopener noreferrer">çŒ«å±‹æ•·æ¢¨æ¢¨Official</a></p>
            <div class="footer-links">
                <a href="https://github.com/vladelaina/Catime/issues" target="_blank" rel="noopener noreferrer">é—®é¢˜åé¦ˆ</a>
                <!-- <a href="#">ç”¨æˆ· Q ç¾¤</a> -->
                <!-- <a href="#">Discord</a> -->
            </div>
        </div>
    </footer>

    <!-- AOS åº“ JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 800, // åŠ¨ç”»æŒç»­æ—¶é—´
            once: true, // åŠ¨ç”»æ˜¯å¦åªå‘ç”Ÿä¸€æ¬¡ - åœ¨å‘ä¸‹æ»šåŠ¨æ—¶
            offset: 50, // ä»åŸå§‹è§¦å‘ç‚¹åç§»çš„è·ç¦» (ä»¥åƒç´ ä¸ºå•ä½)
        });
        
        // Wiki å†…å®¹åŠ è½½
        document.addEventListener('DOMContentLoaded', function() {
            const contentContainer = document.getElementById('markdown-content');
            const loadingIndicator = document.getElementById('content-loading');
            const navLinks = document.querySelectorAll('#wiki-navigation a');
            const debugInfo = document.getElementById('debug-info');
            const currentUrlEl = document.getElementById('current-url');
            const currentDirEl = document.getElementById('current-dir');
            const testFetchBtn = document.getElementById('test-fetch');
            const toggleDebugBtn = document.getElementById('toggle-debug');
            
            // æ£€æŸ¥æ˜¯å¦ä»æ–‡ä»¶ç³»ç»ŸåŠ è½½
            const isFileProtocol = window.location.protocol === 'file:';
            
            // æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯
            function showDebugInfo() {
                debugInfo.style.display = 'block';
                currentUrlEl.textContent = window.location.href;
                currentDirEl.textContent = window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/'));
                toggleDebugBtn.textContent = 'éšè—è°ƒè¯•ä¿¡æ¯';
            }
            
            // éšè—è°ƒè¯•ä¿¡æ¯
            function hideDebugInfo() {
                debugInfo.style.display = 'none';
                toggleDebugBtn.textContent = 'æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯';
            }
            
            // æ£€æŸ¥URLå‚æ•°æ˜¯å¦æœ‰debug=true
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('debug') === 'true') {
                showDebugInfo();
            }
            
            // æµ‹è¯•æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            if (testFetchBtn) {
                testFetchBtn.addEventListener('click', function() {
                    if (isFileProtocol) {
                        alert("æ‚¨æ­£åœ¨ä½¿ç”¨file://åè®®æ‰“å¼€æ–‡ä»¶ï¼Œæµè§ˆå™¨å®‰å…¨é™åˆ¶ä¼šé˜»æ­¢ç›´æ¥è¯»å–æœ¬åœ°æ–‡ä»¶ã€‚\n\nå»ºè®®çš„è§£å†³æ–¹æ¡ˆ:\nä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨è¿è¡Œæ­¤é¡µé¢");
                    } else {
                        fetch('wiki/Home.md')
                            .then(response => {
                                alert(`Home.md è¯·æ±‚çŠ¶æ€: ${response.status} ${response.statusText}`);
                                return response.text();
                            })
                            .then(text => {
                                alert(`æ–‡ä»¶å†…å®¹é•¿åº¦: ${text.length} å­—ç¬¦, å‰50ä¸ªå­—ç¬¦: ${text.substring(0, 50)}...`);
                            })
                            .catch(error => {
                                alert(`è¯·æ±‚å‡ºé”™: ${error.message}`);
                            });
                    }
                });
            }
            
            // åˆ‡æ¢è°ƒè¯•ä¿¡æ¯æ˜¾ç¤º
            if (toggleDebugBtn) {
                toggleDebugBtn.addEventListener('click', function() {
                    if (debugInfo.style.display === 'none') {
                        showDebugInfo();
                    } else {
                        hideDebugInfo();
                    }
                });
            }
            
            // åŠ è½½å†…å®¹å‡½æ•°
            function loadContent(pageName) {
                // æ˜¾ç¤ºåŠ è½½ä¸­
                contentContainer.style.display = 'none';
                loadingIndicator.style.display = 'flex';
                
                // æ„å»ºæ–‡ä»¶è·¯å¾„ (æ ¹æ®æ–‡ä»¶å‘½åçº¦å®š)
                let filePath;
                
                // å¤„ç†ç‰¹æ®Šæ–‡ä»¶åå’Œå¸¸è§è·¯å¾„æ¨¡å¼
                if (pageName === 'å·¦é”®æ‰˜ç›˜å›¾æ ‡') {
                    filePath = 'wiki/å·¦é”®.æ‰˜ç›˜å›¾æ ‡.md';
                } else if (pageName.includes('/')) {
                    // å¦‚æœæ˜¯å­ç›®å½•ä¸­çš„æ–‡ä»¶
                    filePath = `wiki/${pageName}.md`;
                } else {
                    filePath = `wiki/${pageName}.md`;
                }
                
                console.log(`å°è¯•åŠ è½½æ–‡ä»¶: ${filePath}`);
                
                // ä½¿ç”¨fetch APIåŠ è½½Markdownæ–‡ä»¶
                fetch(filePath)
                    .then(response => {
                        if (!response.ok) {
                            // å°è¯•å…¶ä»–å¯èƒ½çš„æ–‡ä»¶è·¯å¾„
                            if (response.status === 404) {
                                // å°è¯•ä¸å¸¦.mdåç¼€çš„è·¯å¾„
                                return fetch(`wiki/${pageName}`);
                            }
                            throw new Error(`HTTPé”™è¯¯ ${response.status}: ${response.statusText}`);
                        }
                        return response.text();
                    })
                    .then(markdownContent => {
                        if (!markdownContent.trim()) {
                            throw new Error('æ–‡ä»¶å†…å®¹ä¸ºç©º');
                        }
                        
                        // æ›¿æ¢å›¾ç‰‡è·¯å¾„ï¼Œä½¿å…¶æŒ‡å‘æ­£ç¡®çš„wiki/imagesç›®å½•
                        markdownContent = markdownContent.replace(
                            /!\[(.*?)\]\((\.\/images\/[^)]+)\)/g, 
                            function(match, altText, imgPath) {
                                // æå–å›¾ç‰‡æ–‡ä»¶å
                                const imgFileName = imgPath.replace('./images/', '');
                                return `![${altText}](wiki/images/${imgFileName})`;
                            }
                        );
                        
                        // å¤„ç†å…¶ä»–çš„å›¾ç‰‡æ ¼å¼ï¼Œå¦‚æœæ²¡æœ‰./å‰ç¼€
                        markdownContent = markdownContent.replace(
                            /!\[(.*?)\]\((images\/[^)]+)\)/g,
                            '![$1](wiki/$2)'
                        );
                        
                        // ä½¿ç”¨marked.jsæ¸²æŸ“Markdownå†…å®¹
                        contentContainer.innerHTML = marked.parse(markdownContent);
                        
                        // è®¾ç½®é¡µé¢æ ‡é¢˜
                        const firstHeading = contentContainer.querySelector('h1, h2, h3, h4, h5, h6');
                        if (firstHeading) {
                            document.title = `${firstHeading.textContent} - Catime æŒ‡å—`;
                        }
                        
                        // éšè—åŠ è½½ä¸­ï¼Œæ˜¾ç¤ºå†…å®¹
                        loadingIndicator.style.display = 'none';
                        contentContainer.style.display = 'block';
                        
                        // å¤„ç†å†…éƒ¨é“¾æ¥
                        handleInternalLinks();
                    })
                    .catch(error => {
                        console.error('åŠ è½½æ–‡ä»¶å‡ºé”™:', error);
                        contentContainer.innerHTML = `
                            <div style="padding: 20px; text-align: center;">
                                <h1>å†…å®¹åŠ è½½é”™è¯¯</h1>
                                <p>æ— æ³•åŠ è½½ "${pageName}" çš„å†…å®¹</p>
                                <p style="color: #666; font-size: 0.9em;">é”™è¯¯è¯¦æƒ…: ${error.message}</p>
                                <div style="margin-top: 20px;">
                                    <p style="margin-bottom: 15px;">
                                        <strong>å¯èƒ½çš„åŸå› :</strong><br>
                                        ${isFileProtocol ? 
                                          'æ‚¨æ­£åœ¨ä½¿ç”¨file://åè®®æ‰“å¼€æ–‡ä»¶ï¼Œæµè§ˆå™¨å®‰å…¨é™åˆ¶ä¼šé˜»æ­¢ç›´æ¥è¯»å–æœ¬åœ°æ–‡ä»¶ã€‚' : 
                                          'æ— æ³•ä»æœåŠ¡å™¨è·å–æ–‡ä»¶å†…å®¹ã€‚'}
                                    </p>
                                    <p style="margin-bottom: 15px;">
                                        <strong>è§£å†³æ–¹æ¡ˆ:</strong><br>
                                        ${isFileProtocol ? 
                                          'è¯·ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨ï¼ˆå¦‚ http-serverã€live-server ç­‰ï¼‰è¿è¡Œæ­¤é¡µé¢' : 
                                          'è¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„å’ŒæœåŠ¡å™¨é…ç½®æ˜¯å¦æ­£ç¡®'}
                                    </p>
                                </div>
                                <p style="margin-top: 20px;">
                                    <a href="#" onclick="window.location.search='?debug=true'; return false;" class="btn btn-sm btn-primary">å¼€å¯è°ƒè¯•æ¨¡å¼</a>
                                    <a href="#" onclick="document.querySelector('#wiki-navigation a[data-page=\\'Home\\']').click(); return false;" class="btn btn-sm btn-secondary" style="margin-left: 10px;">è¿”å›é¦–é¡µ</a>
                                </p>
                            </div>
                        `;
                        loadingIndicator.style.display = 'none';
                        contentContainer.style.display = 'block';
                    });
            }
            
            // åˆå§‹åŠ è½½é¦–é¡µå†…å®¹
            loadContent('Home');
            
            // ä¸ºå¯¼èˆªé“¾æ¥æ·»åŠ ç‚¹å‡»äº‹ä»¶
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // ç§»é™¤æ‰€æœ‰activeç±»
                    navLinks.forEach(l => l.classList.remove('active'));
                    
                    // ä¸ºå½“å‰ç‚¹å‡»çš„é“¾æ¥æ·»åŠ activeç±»
                    this.classList.add('active');
                    
                    // è·å–é¡µé¢åç§°å¹¶åŠ è½½å†…å®¹
                    const pageName = this.getAttribute('data-page');
                    loadContent(pageName);
                });
            });
            
            // å¤„ç†å†…éƒ¨é“¾æ¥
            function handleInternalLinks() {
                document.querySelectorAll('#markdown-content a').forEach(link => {
                    const href = link.getAttribute('href');
                    
                    // å¦‚æœæ˜¯å†…éƒ¨wikié“¾æ¥
                    if (href && (href.startsWith('./') || !href.includes('://') && !href.startsWith('#'))) {
                        link.addEventListener('click', function(e) {
                            e.preventDefault();
                            
                            // å¤„ç†é“¾æ¥æ ¼å¼ï¼Œè·å–é¡µé¢å
                            let targetPage = href.replace(/^\.\//, '');
                            
                            // å»æ‰.mdåç¼€ï¼Œå¦‚æœæœ‰çš„è¯
                            targetPage = targetPage.replace(/\.md$/, '');
                            
                            // æ‰¾åˆ°å¯¹åº”çš„å¯¼èˆªé¡¹å¹¶è§¦å‘ç‚¹å‡»
                            const navItem = document.querySelector(`#wiki-navigation a[data-page="${targetPage}"]`);
                            if (navItem) {
                                navItem.click();
                            } else {
                                // åŠ è½½æ²¡æœ‰åœ¨å¯¼èˆªä¸­åˆ—å‡ºçš„é¡µé¢
                                loadContent(targetPage);
                            }
                        });
                    }
                });
            }
        });
    </script>

    <!-- æ»šåŠ¨è¿›åº¦æŒ‡ç¤ºå™¨è„šæœ¬ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const progressContainer = document.getElementById('scrollProgressContainer');
            const progressCircle = document.querySelector('.scroll-progress-circle-fill');
            const progressPercentage = document.querySelector('.scroll-progress-percentage');
            const circleLength = progressCircle.getTotalLength ? 
                                 progressCircle.getTotalLength() : 283; // å›é€€å€¼
            
            // åˆå§‹è®¾ç½®
            progressCircle.style.strokeDasharray = circleLength;
            progressCircle.style.strokeDashoffset = circleLength;
            
            // è®¡ç®—æ»šåŠ¨è¿›åº¦
            function updateProgress() {
                // è·å–æ–‡æ¡£é«˜åº¦å’Œæ»šåŠ¨ä½ç½®
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const docHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrollPercentage = scrollTop / docHeight;
                
                // æ›´æ–°ç¯å½¢è¿›åº¦æ¡
                const offset = circleLength - (scrollPercentage * circleLength);
                progressCircle.style.strokeDashoffset = offset;
                
                // æ›´æ–°ç™¾åˆ†æ¯”æ–‡æœ¬
                const percentValue = Math.round(scrollPercentage * 100);
                progressPercentage.textContent = `${percentValue}%`;
                
                // æ”¹å˜é¢œè‰²æ¸å˜
                if (percentValue > 75) {
                    progressCircle.style.stroke = 'var(--accent-color)';
                } else if (percentValue > 50) {
                    progressCircle.style.stroke = '#9abdfa';
                } else if (percentValue > 25) {
                    progressCircle.style.stroke = '#7aa2f7';
                } else {
                    progressCircle.style.stroke = 'var(--primary-color)';
                }
            }
            
            // ç‚¹å‡»å›åˆ°é¡¶éƒ¨ï¼Œæ·»åŠ åŠ¨ç”»æ•ˆæœ
            progressContainer.addEventListener('click', function() {
                // æ·»åŠ ç‚¹å‡»æ•ˆæœç±»
                this.classList.add('clicked');
                
                // åˆ›å»ºç²’å­çˆ†å‘æ•ˆæœ
                createParticleBurst();
                
                // å¹³æ»‘æ»šåŠ¨åˆ°é¡¶éƒ¨
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
                
                // ç§»é™¤ç‚¹å‡»æ•ˆæœç±»
                setTimeout(() => {
                    this.classList.remove('clicked');
                }, 300);
            });
            
            // åˆ›å»ºç²’å­çˆ†å‘æ•ˆæœ
            function createParticleBurst() {
                const particles = document.querySelectorAll('.particle');
                
                particles.forEach(particle => {
                    // é‡ç½®åŠ¨ç”»
                    particle.style.animation = 'none';
                    particle.offsetHeight; // è§¦å‘é‡æ’
                    particle.style.animation = null;
                    
                    // éšæœºä½ç½®å’Œé¢œè‰²
                    const hue = Math.floor(Math.random() * 30) + 330; // ç²‰çº¢è‰²èŒƒå›´
                    const saturation = Math.floor(Math.random() * 30) + 70;
                    const lightness = Math.floor(Math.random() * 20) + 70;
                    
                    particle.style.background = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
                    particle.style.boxShadow = `0 0 10px hsl(${hue}, ${saturation}%, ${lightness}%)`;
                });
            }
            
            // ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œä½¿ç”¨é˜²æŠ–å¤„ç†
            let scrollTimeout;
            window.addEventListener('scroll', function() {
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(updateProgress, 10);
            });
            
            // åˆå§‹åŒ–è¿›åº¦
            updateProgress();
        });
    </script>

</body>
</html> 